import{l as _,n as A}from"./index.CXIxz6jE.js";import{r as C,g as j}from"./scheduler.DGDDSEjO.js";import{w as D}from"./index.BrPz2hQj.js";function J(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function K(t,u){_(t,1,1,()=>{u.delete(t.key)})}function L(t,u,b,r,h,T,a,E,S,H,x,M){let l=t.length,y=T.length,m=l;const I={};for(;m--;)I[t[m].key]=m;const v=[],n=new Map,e=new Map,s=[];for(m=y;m--;){const i=M(h,T,m),d=b(i);let f=a.get(d);f?s.push(()=>f.p(i,u)):(f=H(d,i),f.c()),n.set(d,v[m]=f),d in I&&e.set(d,Math.abs(m-I[d]))}const c=new Set,p=new Set;function o(i){A(i,1),i.m(E,x),a.set(i.key,i),x=i.first,y--}for(;l&&y;){const i=v[y-1],d=t[l-1],f=i.key,w=d.key;i===d?(x=i.first,l--,y--):n.has(w)?!a.has(f)||c.has(f)?o(i):p.has(w)?l--:e.get(f)>e.get(w)?(p.add(f),o(i)):(c.add(w),l--):(S(d,a),l--)}for(;l--;){const i=t[l];n.has(i.key)||S(i,a)}for(;y;)o(v[y-1]);return C(s),v}function N(...t){return t.filter(Boolean).join(" ")}const k=typeof document<"u";function B(t){const u=D(t);function b(h){k&&u.set(h)}function r(h){k&&u.update(h)}return{subscribe:u.subscribe,set:b,update:r}}let P=0;function F(){const t=B([]),u=B([]);function b(n){t.update(e=>[n,...e])}function r(n){var f;const{message:e,...s}=n,c=typeof(n==null?void 0:n.id)=="number"||n.id&&((f=n.id)==null?void 0:f.length)>0?n.id:P++,p=n.dismissable===void 0?!0:n.dismissable,o=n.type===void 0?"default":n.type;return j(t).find(w=>w.id===c)?t.update(w=>w.map($=>$.id===c?{...$,...n,id:c,title:e,dismissable:p,type:o,updated:!0}:{...$,updated:!1})):b({...s,id:c,title:e,dismissable:p,type:o}),c}function h(n){if(n===void 0){t.update(e=>e.map(s=>({...s,dismiss:!0})));return}return t.update(e=>e.map(s=>s.id===n?{...s,dismiss:!0}:s)),n}function T(n){if(n===void 0){t.set([]);return}return t.update(e=>e.filter(s=>s.id!==n)),n}function a(n,e){return r({...e,type:"default",message:n})}function E(n,e){return r({...e,type:"error",message:n})}function S(n,e){return r({...e,type:"success",message:n})}function H(n,e){return r({...e,type:"info",message:n})}function x(n,e){return r({...e,type:"warning",message:n})}function M(n,e){return r({...e,type:"loading",message:n})}function l(n,e){if(!e)return;let s;e.loading!==void 0&&(s=r({...e,promise:n,type:"loading",message:e.loading}));const c=n instanceof Promise?n:n();let p=s!==void 0;return c.then(o=>{if(o&&typeof o.ok=="boolean"&&!o.ok){p=!1;const i=typeof e.error=="function"?e.error(`HTTP error! status: ${o.status}`):e.error;r({id:s,type:"error",message:i})}else if(e.success!==void 0){p=!1;const i=typeof e.success=="function"?e.success(o):e.success;r({id:s,type:"success",message:i})}}).catch(o=>{if(e.error!==void 0){p=!1;const i=typeof e.error=="function"?e.error(o):e.error;r({id:s,type:"error",message:i})}}).finally(()=>{var o;p&&(h(s),s=void 0),(o=e.finally)==null||o.call(e)}),s}function y(n,e){const s=(e==null?void 0:e.id)||P++;return r({component:n,id:s,...e}),s}function m(n){u.update(e=>e.filter(s=>s.toastId!==n))}function I(n){if(j(u).find(s=>s.toastId===n.toastId)===void 0){u.update(s=>[n,...s]);return}u.update(s=>s.map(c=>c.toastId===n.toastId?n:c))}function v(){t.set([]),u.set([])}return{create:r,addToast:b,dismiss:h,remove:T,message:a,error:E,success:S,info:H,warning:x,loading:M,promise:l,custom:y,removeHeight:m,setHeight:I,reset:v,toasts:t,heights:u}}const g=F();function O(t,u){return g.create({message:t,...u})}const W=O,Q=Object.assign(W,{success:g.success,info:g.info,warning:g.warning,error:g.error,custom:g.custom,message:g.message,promise:g.promise,dismiss:g.dismiss,loading:g.loading}),R=t=>({subscribe:t});export{g as a,L as b,N as c,J as e,K as o,Q as t,R as u};
